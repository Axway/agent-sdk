---
group: core
kind: Webhook
scope: "management:Environment|management:Integration"
description: Resource representing Webhook Configuration
spec:
  names:
    plural: webhooks
    singular: webhook
  cli:
    shortNames:
      - whs
      - wh
    columns:
      - name: Name
        description: The name of the Webhook.
        jsonPath: .name
        format: string
      - name: Age
        description: The date when the Webhook was created.
        jsonPath: .metadata.audit.createTimestamp
        format: date
      - name: Title
        description: The title of the Webhook.
        jsonPath: .title
        format: string
  versions:
    - name: v1alpha1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            auth:
              type: object
              description: >
                Defines the authentication used to invoke the webhook.
                When invoking the webhook, the value from the secret/key will be sent in the Authorization header.
              properties:
                secret:
                  type: object
                  properties:
                    name:
                      type: string
                      x-amplify-kind-ref: Secret
                      x-amplify-kind-ref-type: soft
                      description: >
                        Secret name to be used as a reference.
                        If the secret is removed, the reference gets removed and the webhook invocation will be done with no Authorization header.
                    key:
                      description: Key to be used from the referenced secret.
                      type: string
                  additionalProperties: false
              additionalProperties: false
            enabled:
              type: boolean
            url:
              type: string
              pattern: '^https?://[\w-_\:\.\?\/=%&#~\[\]\(\)@!$&'',;]*$'
            headers:
              type: object
              description: A list of headers that will be sent as par of the http call to the webhook endpoint.
              additionalProperties:
                type: string
          required:
            - url
          additionalProperties: false
---
group: core
kind: Secret
scope: "*"
description: Secrets definitions.
spec:
  names:
    plural: secrets
    singular: secret
  cli:
    columns:
      - name: Name
        description: The name of the Secret.
        jsonPath: .name
        format: string
      - name: Age
        description: The date when the Secret was created.
        jsonPath: .metadata.audit.createTimestamp
        format: date
      - name: Title
        description: The title of the Secret.
        jsonPath: .title
        format: string
  versions:
    - name: v1alpha1
      storage: true
      served: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            data:
              description: Key value pairs. The value will be stored encrypted.
              x-amplify-encrypted: true
              type: object
              additionalProperties:
                type: string
          additionalProperties: false
